{% extends "home.html" %}
{% block breadcrumb %}
  {% if messages %}
    {% for message in messages %}
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
      <div class=" alert {{message.tags}}">
        <strong>{{ message }}</strong>
      </div>
    </div>
    {% endfor %}
  {% endif %}
{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-11 col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11">
      <h1 class="page-header">
      Course Details
      <a href="#" id="print" class="no-print-icon">
        <i class="fa fa-print green" aria-hidden="true"
          data-toggle="tooltip" data-placement="top"
          title="Print to paper or PDF"></i></a>
      {% if course.approved %}
        | <i class="fa fa-check green" data-toggle="tooltip" data-placement="top"
          title="Submitted for approval"></i>
      {% else %}
      {% if not course.save_submit %}
        | <a href="{% url 'course_update' 'course' course.id %}">
            <i class="fa fa-pencil green" aria-hidden="true"
              data-toggle="tooltip" data-placement="top"
              title="Update Course"></i></a>
      {% endif %}{% endif %}
      </h1>
    </div>
  </div>
  {% if course.save_submit and not course.approved %}
  <!-- /.row -->
  <div class="row">
    <div class="col-12 text-center">
      <div class="panel panel-default mb-3">
        <div class="panel-body">
        <a href="#" class="btn btn-default btn-success proposal-status"
          style="width:128px;" data-status="approve">Approve</a>
        <a href="#" class="btn btn-default btn-danger proposal-status"
          style="margin-left:24px;width:128px;" data-status="decline">Decline</a>
        </div>
      </div>
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  {% endif %}
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
      <div class="panel panel-default mb-3">
        <div class="panel-body">
          <h2 style="border-bottom: 1px black dotted;">{{course.title}}</h2>
          <h3>
            {{course.number}}
            {% if course.phile %}
            <a href="{{media_url}}{{course.phile}}" target="_blank">
              <i class="fas fa-duotone fa-file"
                data-toggle="tooltip" data-placement="top" title="Course Syllabus"></i></a>
            {% endif %}
          </h3>
          <h4>User activity</h4>
          <div class="container">
          <dl class="row">
          <dt class="col-sm-3">Submitted by</dt>
          <dd class="col-sm-8">
            <a href="mailto:{{course.user.email}}">{{course.user.last_name}},
              {{course.user.first_name}}</a>
          </dd>
          <dt class="col-sm-3">Updated by</dt>
          <dd class="col-sm-8">
            <a href="mailto:{{course.updated_by.email}}">{{course.updated_by.last_name}},
              {{course.updated_by.first_name}}</a>
          </dd>
          </dl>
          </div>
          <h4>Dates</h4>
          <div class="container">
          <dl class="row">
          <dt class="col-sm-3">Created at</dt>
          <dd class="col-sm-8">{{course.created_at|date:'Y-m-d'}}</dd>
          <dt class="col-sm-3">Updated at</dt>
          <dd class="col-sm-8">{{course.updated_at|date:'Y-m-d'}}</dd>
          <dt class="col-sm-3">Approved date</dt>
          <dd class="col-sm-8">{{course.approved_date|date:'Y-m-d'}}</dd>
          </dl>
          </div>
          <h3 style="border-bottom: 1px black dotted;">Student Learning Outcomes</h3>
          {% for outcome in course.outcome.all %}
          {% if outcome.name not in "Written Communication,Oral Communication" %}
          <div>
            <h4>
              {{outcome.name}}
              <a style="cursor: help;" tabindex="0" data-toggle="popover" data-trigger="focus" data-placement="right" data-content="{{outcome.rationale}}">
              <i class="fa fa-question-circle fa-xs green" aria-hidden="true"></i></a>
            </h4>
            <p>{{outcome.description}}</p>
            <ol>
              {% for element in outcome.elements.all %}
              <li>
                {{element.description}}
                {% for slo in element.slo.all %}
                  {% if slo.course == course %}
                  <div class="mt-2">{{slo.description|safe|default:""}}</div>
                  {% endif %}
                {% endfor %}
              </li>
              {% endfor %}
            </ol>
          </div>
          {% endif %}
          {% endfor %}
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /col-8 -->
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
      <h2 style="border-bottom: 1px black dotted;">Comments</h2>
      <div id="comments-list">
        {% for note in course.notes.all %}
          {% if note.status %}
          {% cycle 'blue-box' 'lightgrey-box' as boxcolor silent %}
          {% include "dashboard/annotation.inc.html" with bgcolor=boxcolor %}
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <!-- /col-4 -->
  </div>
  <!-- /.row -->
{% endblock content %}
